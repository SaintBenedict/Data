<?xml version="1.0" encoding="utf-8" ?>
<Defs>
  
  <HediffDef ParentName="DiseaseBase">
    <defName>PsychicEntropy</defName>
    <label>psychic entropy</label>
    <description>Chaotic psychic energy built up in the mind. Entropy falls over time. After it clears, it leaves a psychic hangover for several days. If psychic entropy becomes very high, it can cause psychosis, long-term psychic breakdown, destruction of psychic amplifiers, and even brain damage.</description>
    <isBad>true</isBad>
    <comps>
      <li Class="HediffCompProperties_SeverityFromEntropy" />
      <li Class="HediffCompProperties_ChangeImplantLevel">
        <implant>PsychicAmplifier</implant>
        <levelOffset>-1</levelOffset>
        <probabilityPerStage>
          <li>
            <mtbDays>-1</mtbDays>
          </li>
          <li>
            <mtbDays>1</mtbDays>
            <minIntervalDays>0.5</minIntervalDays>
          </li>
          <li>
            <mtbDays>0.75</mtbDays>
            <minIntervalDays>0.375</minIntervalDays>
          </li>
          <li>
            <mtbDays>0.5</mtbDays>
            <minIntervalDays>0.25</minIntervalDays>
          </li>
          <li>
            <mtbDays>0.25</mtbDays>
            <minIntervalDays>0.125</minIntervalDays>
          </li>
        </probabilityPerStage>
      </li>
      <li Class="HediffCompProperties_DamageBrain">
        <mtbDaysPerStage>
          <li>-1</li>
          <li>-1</li>
          <li>-1</li>
          <li>0.5</li>
          <li>0.25</li>
        </mtbDaysPerStage>
        <damageAmount>1~3</damageAmount>
      </li>
    </comps>
    <stages>
      <li>
        <minSeverity>0.0</minSeverity>
        <label>safe</label>
      </li>
      <li>
        <minSeverity>1.0</minSeverity>
        <label>overloaded</label>
        <mentalStateGivers>
          <li>
            <mentalState>Wander_Psychotic_Short</mentalState>
            <mtbDays>0.208</mtbDays>
          </li>
        </mentalStateGivers>
        <hediffGivers>
          <li Class="HediffGiver_AddSeverity">
            <hediff>PsychicBreakdown</hediff>
            <severityAmount>2</severityAmount>
            <mtbHours>2</mtbHours>
          </li>
        </hediffGivers>
      </li>
      <li>
        <minSeverity>1.33</minSeverity>
        <label>hyperloaded</label>
        <mentalStateGivers>
          <li>
            <mentalState>Wander_Psychotic_Short</mentalState>
            <mtbDays>0.1666</mtbDays>
          </li>
        </mentalStateGivers>
        <hediffGivers>
          <li Class="HediffGiver_AddSeverity">
            <hediff>PsychicBreakdown</hediff>
            <severityAmount>4</severityAmount>
            <mtbHours>2</mtbHours>
          </li>
        </hediffGivers>
      </li>
      <li>
        <minSeverity>1.66</minSeverity>
        <label>brain charring</label>
        <mentalStateGivers>
          <li>
            <mentalState>Wander_Psychotic_Short</mentalState>
            <mtbDays>0.125</mtbDays>
          </li>
        </mentalStateGivers>
        <hediffGivers>
          <li Class="HediffGiver_AddSeverity">
            <hediff>PsychicBreakdown</hediff>
            <severityAmount>6</severityAmount>
            <mtbHours>2</mtbHours>
          </li>
        </hediffGivers>
      </li>
      <li>
        <minSeverity>2.0</minSeverity>
        <label>brain roasting</label>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <postFactor>0.1</postFactor>
          </li>
        </capMods>
        <hediffGivers>
          <li Class="HediffGiver_Refresh">
            <hediff>PsychicShock</hediff>
          </li>
          <li Class="HediffGiver_AddSeverity">
            <hediff>PsychicBreakdown</hediff>
            <severityAmount>8</severityAmount>
            <mtbHours>2</mtbHours>
          </li>
        </hediffGivers>
      </li>
    </stages>
  </HediffDef>

  <HediffDef ParentName="DiseaseBase">
    <defName>PsychicBreakdown</defName>
    <label>psychic breakdown</label>
    <description>Long-term psychic destabilization of the mind, usually caused by excessive psychic entropy. Even when the entropy clears, the breakdown can last for many days, causing mental disturbances of various kinds.</description>
    <isBad>true</isBad>
    <initialSeverity>0</initialSeverity>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-1.0</severityPerDay>
        <showDaysToRecover>true</showDaysToRecover>
      </li>
    </comps>
    <stages>
      <li>
        <minSeverity>0.01</minSeverity>
        <label>minor</label>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.2</offset>
          </li>
        </capMods>
        <mentalBreakMtbDays>3</mentalBreakMtbDays>
        <allowedMentalBreakIntensities>
          <li>Minor</li>
        </allowedMentalBreakIntensities>
      </li>
      <li>
        <minSeverity>5.0</minSeverity>
        <label>major</label>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.3</offset>
          </li>
        </capMods>
        <mentalBreakMtbDays>3</mentalBreakMtbDays>
        <allowedMentalBreakIntensities>
          <li>Minor</li>
          <li>Major</li>
        </allowedMentalBreakIntensities>
      </li>
      <li>
        <minSeverity>12.0</minSeverity>
        <label>total</label>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.4</offset>
          </li>
        </capMods>
        <mentalBreakMtbDays>3</mentalBreakMtbDays>
        <allowedMentalBreakIntensities>
          <li>Minor</li>
          <li>Major</li>
          <li>Extreme</li>
        </allowedMentalBreakIntensities>
      </li>
    </stages>
  </HediffDef>
  
  <HediffDef Name="PsycastHediffBase" Abstract = "True">
    <hediffClass>HediffWithComps</hediffClass>
    <comps>
      <li Class="HediffCompProperties_Disappears">
        <showRemainingTime>True</showRemainingTime>
      </li>
    </comps>
  </HediffDef>

  <HediffDef ParentName = "PsycastHediffBase">
    <defName>PsychicAnesthesia</defName>
    <label>psychic anesthesia</label>
    <description>Psychically-induced pain insensitivity.</description>
    <isBad>false</isBad>
    <stages>
      <li>
        <painFactor>0.1</painFactor>
      </li>
    </stages>
  </HediffDef>

  <HediffDef ParentName = "PsycastHediffBase">
    <defName>PsychicBurden</defName>
    <label>psychic burden</label>
    <description>Psychically-induced difficulty in locomotion.</description>
    <isBad>true</isBad>
    <stages>
      <li>
        <capMods>
          <li>
            <capacity>Moving</capacity>
            <setMax>0.4</setMax>
          </li>
        </capMods>
        <capacityFactorEffectMultiplier>PsychicSensitivity</capacityFactorEffectMultiplier>
      </li>
    </stages>
  </HediffDef>

  <HediffDef ParentName = "PsycastHediffBase">
    <defName>PsychicBlindness</defName>
    <label>psychic blindness</label>
    <description>Psychically-induced partial blindness.</description>
    <isBad>true</isBad>
    <stages>
      <li>
        <capMods>
          <li>
            <capacity>Sight</capacity>
            <postFactor>0.5</postFactor>
          </li>
        </capMods>
        <capacityFactorEffectMultiplier>PsychicSensitivity</capacityFactorEffectMultiplier>
      </li>
    </stages>
  </HediffDef>

  <HediffDef ParentName = "PsycastHediffBase">
    <defName>PsychicVertigo</defName>
    <label>psychic vertigo</label>
    <description>Psychically-induced loss of spatial orientation. This will cause flesh creatures to vomit.</description>
    <isBad>true</isBad>
    <stages>
      <li>
        <vomitMtbDays>0.00005787</vomitMtbDays>
      </li>
    </stages>
    <comps>
      <li Class="HediffCompProperties_Disorientation">
        <wanderMtbHours>0.05</wanderMtbHours>
        <singleWanderDurationTicks>180</singleWanderDurationTicks>
        <wanderRadius>3</wanderRadius>
      </li>
    </comps>
  </HediffDef>

  <HediffDef ParentName = "PsycastHediffBase">
    <defName>PsychicFocus</defName>
    <label>psychic focus</label>
    <description>Psychically-induced mental focus, increasing sight, hearing and movement capactities.</description>
    <isBad>false</isBad>
    <stages>
      <li>
        <capMods>
          <li>
            <capacity>Sight</capacity>
            <postFactor>1.3</postFactor>
          </li>
          <li>
            <capacity>Hearing</capacity>
            <postFactor>1.3</postFactor>
          </li>
          <li>
            <capacity>Moving</capacity>
            <postFactor>1.3</postFactor>
          </li>
        </capMods>
      </li>
    </stages>
  </HediffDef>

  <HediffDef ParentName = "PsycastHediffBase">
    <defName>PsychicInvisibility</defName>
    <label>psychic invisibility</label>
    <description>Psychically-induced invisibility. This actually affects others nearby, making their brains unable to perceive the sight of this individual, even if the eyes are unaffected.</description>
    <comps>
      <li Class="HediffCompProperties">
        <compClass>HediffComp_Invisibility</compClass>
      </li>
    </comps>
  </HediffDef>

  <HediffDef ParentName = "PsycastHediffBase">
    <defName>EntropyLink</defName>
    <label>entropy link</label>
    <description>A psychic link with another individual. Gain or loss of psychic entropy incurred by one will be shared equally between both.</description>
    <comps>
      <li Class="HediffCompProperties_EntropyLink">
        <compClass>HediffComp_EntropyLink</compClass>
        <entropyTransferAmount>0.5</entropyTransferAmount>
      </li>
      <li Class="HediffCompProperties_Link">
        <maxDistance>30</maxDistance>
      </li>
    </comps>
    <stages>
      <li>
        <statFactors>
          <PsychicEntropyGain>0.5</PsychicEntropyGain>
        </statFactors>
      </li>
    </stages>
  </HediffDef>

</Defs>